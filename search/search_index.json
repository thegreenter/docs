{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"","title":"Inicio"},{"location":"faq/","text":"Preguntas Frecuentes \u00b6 Facturas \u00b6 Que es el CDR CDR son las siglas de constancia de recepcion y es emitida por sunat indicando que una factura ha sido aceptada o rechazada. Para saber a cual estado pertenece la factura emitida, debemos identificar en que rango de la siguiente tabla se encuentra el codigo de respuesta. Rango Descripci\u00f3n Que hacer 0100 a 1999 Excepciones Corregir y volver a enviar la factura 2000 a 3999 Errores (Rechazo) Emitir una nueva factura >4000 Observaciones Corregir en futuras facturas Resumen diario \u00b6 Como obtener el CDR El proceso del resumen diario se compone de 2 fases, el env\u00edo y la obtenci\u00f3n del CDR; este \u00faltimo no siempre se puede obtener inmediatamente, para ello debemos tener en cuenta el c\u00f3digo que Sunat responde. C\u00f3digo Descripci\u00f3n Estado del CDR 0 Procesado correctamente Disponible 98 En Proceso Necesitamos volver a intentar 99 Procesado con errores Disponible WebService \u00b6 Bad Gateway Este es un error al conectarse con el servicio (Sunat u OSE), y lo unico que se puede hacer es informar al administrador del servicio y esperar. Could not connect to host Este mensaje puede ser resultado de varios casos, entre ellos falta de conectividad a internet, y otro mas recurrente por problemas al validar el certificado SSL del servicio a conectar. Para solucionar esto puede probar una de estas opciones: - Instalar el certificado de sunat en el servidor que se esta usando - En caso de sistemas linux, actualizar ca-certificates - Deshabilitar la verificaci\u00f3n SSL en Ws\\Services\\SoapClient.php <?php $parameters = [ 'stream_context' => stream_context_create ([ 'ssl' => [ 'verify_peer' => false , ], ]), ];","title":"Preguntas Frecuentes"},{"location":"faq/#preguntas-frecuentes","text":"","title":"Preguntas Frecuentes"},{"location":"faq/#facturas","text":"Que es el CDR CDR son las siglas de constancia de recepcion y es emitida por sunat indicando que una factura ha sido aceptada o rechazada. Para saber a cual estado pertenece la factura emitida, debemos identificar en que rango de la siguiente tabla se encuentra el codigo de respuesta. Rango Descripci\u00f3n Que hacer 0100 a 1999 Excepciones Corregir y volver a enviar la factura 2000 a 3999 Errores (Rechazo) Emitir una nueva factura >4000 Observaciones Corregir en futuras facturas","title":"Facturas"},{"location":"faq/#resumen-diario","text":"Como obtener el CDR El proceso del resumen diario se compone de 2 fases, el env\u00edo y la obtenci\u00f3n del CDR; este \u00faltimo no siempre se puede obtener inmediatamente, para ello debemos tener en cuenta el c\u00f3digo que Sunat responde. C\u00f3digo Descripci\u00f3n Estado del CDR 0 Procesado correctamente Disponible 98 En Proceso Necesitamos volver a intentar 99 Procesado con errores Disponible","title":"Resumen diario"},{"location":"faq/#webservice","text":"Bad Gateway Este es un error al conectarse con el servicio (Sunat u OSE), y lo unico que se puede hacer es informar al administrador del servicio y esperar. Could not connect to host Este mensaje puede ser resultado de varios casos, entre ellos falta de conectividad a internet, y otro mas recurrente por problemas al validar el certificado SSL del servicio a conectar. Para solucionar esto puede probar una de estas opciones: - Instalar el certificado de sunat en el servidor que se esta usando - En caso de sistemas linux, actualizar ca-certificates - Deshabilitar la verificaci\u00f3n SSL en Ws\\Services\\SoapClient.php <?php $parameters = [ 'stream_context' => stream_context_create ([ 'ssl' => [ 'verify_peer' => false , ], ]), ];","title":"WebService"},{"location":"migrate2.1/","text":"Migrar a UBL 2.1 \u00b6 En el archivo composer.json , ajustar la version de greenter/greenter a la version 3.0 . { \"require\" : { \"greenter/greenter\" : \"^3.0\" } } Luego ejecutar composer update greenter/greenter Nuevos Campos \u00b6 El principal cambio para indicar que el comprobante utilize UBL 2.1 , es seteando el campo ublVersion que existe en Invoice y Note . <?php use Greenter\\Model\\Sale\\Invoice ; use Greenter\\Model\\Sale\\Note ; $invoice = new Invoice (); $invoice -> setUblVersion ( '2.1' ); // .... $note = new Note (); $note -> setUblVersion ( '2.1' ); // ... Ejemplo En el ejemplo de primeros pasos, ver\u00e1 los nuevos campos resaltados en el c\u00f3digo.","title":"Migrar a UBL 2.1"},{"location":"migrate2.1/#migrar-a-ubl-21","text":"En el archivo composer.json , ajustar la version de greenter/greenter a la version 3.0 . { \"require\" : { \"greenter/greenter\" : \"^3.0\" } } Luego ejecutar composer update greenter/greenter","title":"Migrar a UBL 2.1"},{"location":"migrate2.1/#nuevos-campos","text":"El principal cambio para indicar que el comprobante utilize UBL 2.1 , es seteando el campo ublVersion que existe en Invoice y Note . <?php use Greenter\\Model\\Sale\\Invoice ; use Greenter\\Model\\Sale\\Note ; $invoice = new Invoice (); $invoice -> setUblVersion ( '2.1' ); // .... $note = new Note (); $note -> setUblVersion ( '2.1' ); // ... Ejemplo En el ejemplo de primeros pasos, ver\u00e1 los nuevos campos resaltados en el c\u00f3digo.","title":"Nuevos Campos"},{"location":"production/","text":"Greenter en Producci\u00f3n \u00b6 En esta secci\u00f3n de indican los pasos para convertirse en Emisor Electr\u00f3nico. UBL 2.1 Apartir de octubre del 2018 , los nuevos emisores electr\u00f3nicos estan obligados a emitir sus comprobantes empleando el est\u00e1ndar UBL 2.1 Pasos \u00b6 Creaci\u00f3n de usuario secundario con los permisos para Facturaci\u00f3n Electr\u00f3nica. Registrar el certificado digital en el portal de SUNAT, en formato .cer (Public key). Greenter requiere el certificado digital en formato .pem (Private & Public Key), si tiene un certificado .pfx puede convertirlo siguiendo esta gu\u00eda . Configurar la url del servicio de Producci\u00f3n. <?php use Greenter\\Ws\\Services\\SunatEndpoints ; $see = new \\Greenter\\See (); $see -> setService ( SunatEndpoints :: FE_PRODUCCION ); $see -> setCertificate ( file_get_contents ( __DIR__ . '/valid-cer.pem' )); $see -> setCredentials ( '20000000001DNOMBLOI' , 'psdlbmrt' ); // clave SOL Usuario Secundario Despues de crear el usuario secundario, tiene que esperar hasta un plazo de 24 horas para que este activo y pueda usarlo.","title":"Paso a Producci\u00f3n"},{"location":"production/#greenter-en-produccion","text":"En esta secci\u00f3n de indican los pasos para convertirse en Emisor Electr\u00f3nico. UBL 2.1 Apartir de octubre del 2018 , los nuevos emisores electr\u00f3nicos estan obligados a emitir sus comprobantes empleando el est\u00e1ndar UBL 2.1","title":"Greenter en Producci\u00f3n"},{"location":"production/#pasos","text":"Creaci\u00f3n de usuario secundario con los permisos para Facturaci\u00f3n Electr\u00f3nica. Registrar el certificado digital en el portal de SUNAT, en formato .cer (Public key). Greenter requiere el certificado digital en formato .pem (Private & Public Key), si tiene un certificado .pfx puede convertirlo siguiendo esta gu\u00eda . Configurar la url del servicio de Producci\u00f3n. <?php use Greenter\\Ws\\Services\\SunatEndpoints ; $see = new \\Greenter\\See (); $see -> setService ( SunatEndpoints :: FE_PRODUCCION ); $see -> setCertificate ( file_get_contents ( __DIR__ . '/valid-cer.pem' )); $see -> setCredentials ( '20000000001DNOMBLOI' , 'psdlbmrt' ); // clave SOL Usuario Secundario Despues de crear el usuario secundario, tiene que esperar hasta un plazo de 24 horas para que este activo y pueda usarlo.","title":"Pasos"},{"location":"starter/","text":"Empezando con Greenter \u00b6 Instalaci\u00f3n \u00b6 La forma mas facil de instalar grenter es utilizando composer . composer install greenter/greenter Requerimientos \u00b6 Conocimientos en el proceso de Facturaci\u00f3n Electr\u00f3nica , puedes revisar FE-Primer y cpe-sunat Certificado en formato PEM Credenciales Clave SOL Configuraci\u00f3n \u00b6 Para prop\u00f3sitos de prueba, descargaremos este certificado y utilizaremos las credenciales por defecto, user 20000000001MODDATOS , password moddatos . Certificado .PFX Si cuenta con un certificado .PFX, para convertirlo a formato .PEM necesita la clave y seguir el siguiente ejemplo Crearemos el archivo config.php donde configuraremos la ruta del servicio, el certificado digital y las credenciales (Clave SOL) para conectarse al servicio: <?php use Greenter\\Ws\\Services\\SunatEndpoints ; use Greenter\\See ; // CLAVE SOL utilizada. // Ruc: 20000000001 // Usuario: MODDATOS // Contrase\u00f1a: moddatos $see = new See (); $see -> setService ( SunatEndpoints :: FE_BETA ); $see -> setCertificate ( file_get_contents ( __DIR__ . '/certificate.pem' )); $see -> setCredentials ( '20000000001MODDATOS' /*ruc+usuario*/ , 'moddatos' ); return $see ; En el ambiente de producci\u00f3n lo recomendable es crear un usuario secundario con solo permisos para comprobantes electr\u00f3nicos. Factura Electr\u00f3nica \u00b6 Para este ejemplo se usar\u00e1 la version UBL 2.1 . Elaboraremos nuestra primera factura electr\u00f3nica, para ello creamos el archivo factura.php y agregaremos el siguiente c\u00f3digo: <?php use Greenter\\Model\\Client\\Client ; use Greenter\\Model\\Company\\Company ; use Greenter\\Model\\Company\\Address ; use Greenter\\Model\\Sale\\Invoice ; use Greenter\\Model\\Sale\\SaleDetail ; use Greenter\\Model\\Sale\\Legend ; require __DIR__ . '/vendor/autoload.php' ; $see = require __DIR__ . '/config.php' ; // Cliente $client = new Client (); $client -> setTipoDoc ( '6' ) -> setNumDoc ( '20000000001' ) -> setRznSocial ( 'EMPRESA 1' ); // Emisor $address = new Address (); $address -> setUbigueo ( '150101' ) -> setDepartamento ( 'LIMA' ) -> setProvincia ( 'LIMA' ) -> setDistrito ( 'LIMA' ) -> setUrbanizacion ( 'NONE' ) -> setDireccion ( 'AV LS' ); $company = new Company (); $company -> setRuc ( '20000000001' ) -> setRazonSocial ( 'EMPRESA SAC' ) -> setNombreComercial ( 'EMPRESA' ) -> setAddress ( $address ); // Venta $invoice = ( new Invoice ()) -> setUblVersion ( '2.1' ) -> setTipoOperacion ( '0101' ) // Catalog. 51 -> setTipoDoc ( '01' ) -> setSerie ( 'F001' ) -> setCorrelativo ( '1' ) -> setFechaEmision ( new DateTime ()) -> setTipoMoneda ( 'PEN' ) -> setClient ( $client ) -> setMtoOperGravadas ( 100.00 ) -> setMtoIGV ( 18.00 ) -> setTotalImpuestos ( 18.00 ) -> setValorVenta ( 100.00 ) -> setSubTotal ( 118.00 ) -> setMtoImpVenta ( 118.00 ) -> setCompany ( $company ); $item = ( new SaleDetail ()) -> setCodProducto ( 'P001' ) -> setUnidad ( 'NIU' ) -> setCantidad ( 2 ) -> setDescripcion ( 'PRODUCTO 1' ) -> setMtoBaseIgv ( 100 ) -> setPorcentajeIgv ( 18.00 ) // 18% -> setIgv ( 18.00 ) -> setTipAfeIgv ( '10' ) -> setTotalImpuestos ( 18.00 ) -> setMtoValorVenta ( 100.00 ) -> setMtoValorUnitario ( 50.00 ) -> setMtoPrecioUnitario ( 59.00 ); $legend = ( new Legend ()) -> setCode ( '1000' ) -> setValue ( 'SON DOSCIENTOS TREINTA Y SEIS CON 00/100 SOLES' ); $invoice -> setDetails ([ $item ]) -> setLegends ([ $legend ]); $result = $see -> send ( $invoice ); // Guardar XML file_put_contents ( $invoice -> getName () . '.xml' , $see -> getFactory () -> getLastXml ()); if ( ! $result -> isSuccess ()) { var_dump ( $result -> getError ()); exit (); } echo $result -> getCdrResponse () -> getDescription (); // Guardar CDR file_put_contents ( 'R-' . $invoice -> getName () . '.zip' , $result -> getCdrZip ()); Estructura del proyecto / \u251c\u2500\u2500 vendor/ \u251c\u2500\u2500 certificate.pem \u251c\u2500\u2500 composer.json \u251c\u2500\u2500 config.php \u251c\u2500\u2500 factura.php Ejecutar \u00b6 Finalmente ejecutaremos el script desde la linea de comandos. php factura.php y si todo sale bien obtendremos como respuesta. Exito! La Factura numero F001-1, ha sido aceptada Esta ejemplo puede encontrarlo en thegreenter/firststeps .","title":"Empezar"},{"location":"starter/#empezando-con-greenter","text":"","title":"Empezando con Greenter"},{"location":"starter/#instalacion","text":"La forma mas facil de instalar grenter es utilizando composer . composer install greenter/greenter","title":"Instalaci\u00f3n"},{"location":"starter/#requerimientos","text":"Conocimientos en el proceso de Facturaci\u00f3n Electr\u00f3nica , puedes revisar FE-Primer y cpe-sunat Certificado en formato PEM Credenciales Clave SOL","title":"Requerimientos"},{"location":"starter/#configuracion","text":"Para prop\u00f3sitos de prueba, descargaremos este certificado y utilizaremos las credenciales por defecto, user 20000000001MODDATOS , password moddatos . Certificado .PFX Si cuenta con un certificado .PFX, para convertirlo a formato .PEM necesita la clave y seguir el siguiente ejemplo Crearemos el archivo config.php donde configuraremos la ruta del servicio, el certificado digital y las credenciales (Clave SOL) para conectarse al servicio: <?php use Greenter\\Ws\\Services\\SunatEndpoints ; use Greenter\\See ; // CLAVE SOL utilizada. // Ruc: 20000000001 // Usuario: MODDATOS // Contrase\u00f1a: moddatos $see = new See (); $see -> setService ( SunatEndpoints :: FE_BETA ); $see -> setCertificate ( file_get_contents ( __DIR__ . '/certificate.pem' )); $see -> setCredentials ( '20000000001MODDATOS' /*ruc+usuario*/ , 'moddatos' ); return $see ; En el ambiente de producci\u00f3n lo recomendable es crear un usuario secundario con solo permisos para comprobantes electr\u00f3nicos.","title":"Configuraci\u00f3n"},{"location":"starter/#factura-electronica","text":"Para este ejemplo se usar\u00e1 la version UBL 2.1 . Elaboraremos nuestra primera factura electr\u00f3nica, para ello creamos el archivo factura.php y agregaremos el siguiente c\u00f3digo: <?php use Greenter\\Model\\Client\\Client ; use Greenter\\Model\\Company\\Company ; use Greenter\\Model\\Company\\Address ; use Greenter\\Model\\Sale\\Invoice ; use Greenter\\Model\\Sale\\SaleDetail ; use Greenter\\Model\\Sale\\Legend ; require __DIR__ . '/vendor/autoload.php' ; $see = require __DIR__ . '/config.php' ; // Cliente $client = new Client (); $client -> setTipoDoc ( '6' ) -> setNumDoc ( '20000000001' ) -> setRznSocial ( 'EMPRESA 1' ); // Emisor $address = new Address (); $address -> setUbigueo ( '150101' ) -> setDepartamento ( 'LIMA' ) -> setProvincia ( 'LIMA' ) -> setDistrito ( 'LIMA' ) -> setUrbanizacion ( 'NONE' ) -> setDireccion ( 'AV LS' ); $company = new Company (); $company -> setRuc ( '20000000001' ) -> setRazonSocial ( 'EMPRESA SAC' ) -> setNombreComercial ( 'EMPRESA' ) -> setAddress ( $address ); // Venta $invoice = ( new Invoice ()) -> setUblVersion ( '2.1' ) -> setTipoOperacion ( '0101' ) // Catalog. 51 -> setTipoDoc ( '01' ) -> setSerie ( 'F001' ) -> setCorrelativo ( '1' ) -> setFechaEmision ( new DateTime ()) -> setTipoMoneda ( 'PEN' ) -> setClient ( $client ) -> setMtoOperGravadas ( 100.00 ) -> setMtoIGV ( 18.00 ) -> setTotalImpuestos ( 18.00 ) -> setValorVenta ( 100.00 ) -> setSubTotal ( 118.00 ) -> setMtoImpVenta ( 118.00 ) -> setCompany ( $company ); $item = ( new SaleDetail ()) -> setCodProducto ( 'P001' ) -> setUnidad ( 'NIU' ) -> setCantidad ( 2 ) -> setDescripcion ( 'PRODUCTO 1' ) -> setMtoBaseIgv ( 100 ) -> setPorcentajeIgv ( 18.00 ) // 18% -> setIgv ( 18.00 ) -> setTipAfeIgv ( '10' ) -> setTotalImpuestos ( 18.00 ) -> setMtoValorVenta ( 100.00 ) -> setMtoValorUnitario ( 50.00 ) -> setMtoPrecioUnitario ( 59.00 ); $legend = ( new Legend ()) -> setCode ( '1000' ) -> setValue ( 'SON DOSCIENTOS TREINTA Y SEIS CON 00/100 SOLES' ); $invoice -> setDetails ([ $item ]) -> setLegends ([ $legend ]); $result = $see -> send ( $invoice ); // Guardar XML file_put_contents ( $invoice -> getName () . '.xml' , $see -> getFactory () -> getLastXml ()); if ( ! $result -> isSuccess ()) { var_dump ( $result -> getError ()); exit (); } echo $result -> getCdrResponse () -> getDescription (); // Guardar CDR file_put_contents ( 'R-' . $invoice -> getName () . '.zip' , $result -> getCdrZip ()); Estructura del proyecto / \u251c\u2500\u2500 vendor/ \u251c\u2500\u2500 certificate.pem \u251c\u2500\u2500 composer.json \u251c\u2500\u2500 config.php \u251c\u2500\u2500 factura.php","title":"Factura Electr\u00f3nica"},{"location":"starter/#ejecutar","text":"Finalmente ejecutaremos el script desde la linea de comandos. php factura.php y si todo sale bien obtendremos como respuesta. Exito! La Factura numero F001-1, ha sido aceptada Esta ejemplo puede encontrarlo en thegreenter/firststeps .","title":"Ejecutar"},{"location":"examples/anticipo/","text":"Factura con Deducci\u00f3n de Anticipos \u00b6 Las lineas resaltadas son propias de este modelo de factura. C\u00f3digo \u00b6 <?php use Greenter\\Model\\Sale\\Invoice ; use Greenter\\Model\\Sale\\Legend ; use Greenter\\Model\\Sale\\Prepayment ; use Greenter\\Model\\Sale\\SaleDetail ; $invoice = new Invoice (); $invoice -> setUblVersion ( '2.1' ) -> setTipoOperacion ( '0101' ) -> setTipoDoc ( '01' ) -> setSerie ( 'F001' ) -> setCorrelativo ( '123' ) -> setFechaEmision ( new \\DateTime ()) -> setTipoMoneda ( 'PEN' ) -> setClient ( $this -> getClient ()) -> setCompany ( $this -> getCompany ()) -> setDescuentos ([( new Charge ()) -> setCodTipo ( '04' ) // catalog. 53 -> setFactor ( 1 ) -> setMonto ( 100 ) // anticipo -> setMontoBase ( 100 ) ]) -> setMtoOperGravadas ( 100 ) -> setMtoIGV ( 18 ) -> setValorVenta ( 200 ) -> setTotalImpuestos ( 18 ) -> setMtoImpVenta ( 118 ) -> setAnticipos ([ ( new Prepayment ()) -> setTipoDocRel ( '02' ) // catalog. 12 -> setNroDocRel ( 'F001-111' ) -> setTotal ( 100 ) ]) -> setTotalAnticipos ( 100 ); $detail = new SaleDetail (); $detail -> setCodProducto ( 'P001' ) -> setUnidad ( 'NIU' ) -> setDescripcion ( 'PROD 1' ) -> setCantidad ( 2 ) -> setMtoValorUnitario ( 100 ) -> setMtoValorVenta ( 200 ) -> setMtoBaseIgv ( 200 ) -> setPorcentajeIgv ( 18 ) -> setIgv ( 36 ) -> setTipAfeIgv ( '10' ) -> setTotalImpuestos ( 36 ) -> setMtoPrecioUnitario ( 118 ) ; $invoice -> setDetails ([ $detail ]) -> setLegends ([ ( new Legend ()) -> setCode ( '1000' ) -> setValue ( 'SON DOSCIENTOS TREINTA Y SEIS CON OO/100 SOLES' ) ]);","title":"F. Anticipos"},{"location":"examples/anticipo/#factura-con-deduccion-de-anticipos","text":"Las lineas resaltadas son propias de este modelo de factura.","title":"Factura con Deducci\u00f3n de Anticipos"},{"location":"examples/anticipo/#codigo","text":"<?php use Greenter\\Model\\Sale\\Invoice ; use Greenter\\Model\\Sale\\Legend ; use Greenter\\Model\\Sale\\Prepayment ; use Greenter\\Model\\Sale\\SaleDetail ; $invoice = new Invoice (); $invoice -> setUblVersion ( '2.1' ) -> setTipoOperacion ( '0101' ) -> setTipoDoc ( '01' ) -> setSerie ( 'F001' ) -> setCorrelativo ( '123' ) -> setFechaEmision ( new \\DateTime ()) -> setTipoMoneda ( 'PEN' ) -> setClient ( $this -> getClient ()) -> setCompany ( $this -> getCompany ()) -> setDescuentos ([( new Charge ()) -> setCodTipo ( '04' ) // catalog. 53 -> setFactor ( 1 ) -> setMonto ( 100 ) // anticipo -> setMontoBase ( 100 ) ]) -> setMtoOperGravadas ( 100 ) -> setMtoIGV ( 18 ) -> setValorVenta ( 200 ) -> setTotalImpuestos ( 18 ) -> setMtoImpVenta ( 118 ) -> setAnticipos ([ ( new Prepayment ()) -> setTipoDocRel ( '02' ) // catalog. 12 -> setNroDocRel ( 'F001-111' ) -> setTotal ( 100 ) ]) -> setTotalAnticipos ( 100 ); $detail = new SaleDetail (); $detail -> setCodProducto ( 'P001' ) -> setUnidad ( 'NIU' ) -> setDescripcion ( 'PROD 1' ) -> setCantidad ( 2 ) -> setMtoValorUnitario ( 100 ) -> setMtoValorVenta ( 200 ) -> setMtoBaseIgv ( 200 ) -> setPorcentajeIgv ( 18 ) -> setIgv ( 36 ) -> setTipAfeIgv ( '10' ) -> setTotalImpuestos ( 36 ) -> setMtoPrecioUnitario ( 118 ) ; $invoice -> setDetails ([ $detail ]) -> setLegends ([ ( new Legend ()) -> setCode ( '1000' ) -> setValue ( 'SON DOSCIENTOS TREINTA Y SEIS CON OO/100 SOLES' ) ]);","title":"C\u00f3digo"},{"location":"examples/boleta/","text":"Boleta de Venta \u00b6 Este ejemplo muestra la creaci\u00f3n del XML para una boleta de venta electr\u00f3nica, empleando el est\u00e1ndar UBL 2.1 Info Seg\u00fan normativa de SUNAT, las boletas electronicas se envian mediante el resumen diario. Para prop\u00f3sitos de prueba y validar el xml generado puede hacer uso del servicio beta. Ejemplo \u00b6 <?php use Greenter\\Model\\Client\\Client ; use Greenter\\Model\\Company\\Company ; use Greenter\\Model\\Company\\Address ; use Greenter\\Model\\Sale\\Invoice ; use Greenter\\Model\\Sale\\SaleDetail ; use Greenter\\Model\\Sale\\Legend ; require __DIR__ . '/vendor/autoload.php' ; $see = require __DIR__ . '/config.php' ; // Cliente $client = new Client (); $client -> setTipoDoc ( '1' ) -> setNumDoc ( '46712369' ) -> setRznSocial ( 'MARIA RAMOS ARTEAGA' ); // Emisor $address = new Address (); $address -> setUbigueo ( '150101' ) -> setDepartamento ( 'LIMA' ) -> setProvincia ( 'LIMA' ) -> setDistrito ( 'LIMA' ) -> setUrbanizacion ( '-' ) -> setDireccion ( 'AV LOS GERUNDIOS' ); $company = new Company (); $company -> setRuc ( '20000000001' ) -> setRazonSocial ( 'EMPRESA SAC' ) -> setNombreComercial ( 'EMPRESA' ) -> setAddress ( $address ); // Venta $invoice = ( new Invoice ()) -> setUblVersion ( '2.1' ) -> setTipoOperacion ( '0101' ) // Catalog. 51 -> setTipoDoc ( '01' ) -> setSerie ( 'B001' ) -> setCorrelativo ( '1' ) -> setFechaEmision ( new DateTime ()) -> setTipoMoneda ( 'PEN' ) -> setClient ( $client ) -> setMtoOperGravadas ( 100.00 ) -> setMtoIGV ( 18.00 ) -> setTotalImpuestos ( 18.00 ) -> setValorVenta ( 100.00 ) -> setSubTotal ( 118.00 ) -> setMtoImpVenta ( 118.00 ) -> setCompany ( $company ); $item = ( new SaleDetail ()) -> setCodProducto ( 'P001' ) -> setUnidad ( 'NIU' ) -> setCantidad ( 2 ) -> setDescripcion ( 'PRODUCTO 1' ) -> setMtoBaseIgv ( 100 ) -> setPorcentajeIgv ( 18.00 ) // 18% -> setIgv ( 18.00 ) -> setTipAfeIgv ( '10' ) -> setTotalImpuestos ( 18.00 ) -> setMtoValorVenta ( 100.00 ) -> setMtoValorUnitario ( 50.00 ) -> setMtoPrecioUnitario ( 59.00 ); $legend = ( new Legend ()) -> setCode ( '1000' ) -> setValue ( 'SON DOSCIENTOS TREINTA Y SEIS CON 00/100 SOLES' ); $invoice -> setDetails ([ $item ]) -> setLegends ([ $legend ]); $xml = $see -> getXmlSigned ( $invoice ); // Guardar XML file_put_contents ( $invoice -> getName () . '.xml' , $xml );","title":"Boleta de Venta"},{"location":"examples/boleta/#boleta-de-venta","text":"Este ejemplo muestra la creaci\u00f3n del XML para una boleta de venta electr\u00f3nica, empleando el est\u00e1ndar UBL 2.1 Info Seg\u00fan normativa de SUNAT, las boletas electronicas se envian mediante el resumen diario. Para prop\u00f3sitos de prueba y validar el xml generado puede hacer uso del servicio beta.","title":"Boleta de Venta"},{"location":"examples/boleta/#ejemplo","text":"<?php use Greenter\\Model\\Client\\Client ; use Greenter\\Model\\Company\\Company ; use Greenter\\Model\\Company\\Address ; use Greenter\\Model\\Sale\\Invoice ; use Greenter\\Model\\Sale\\SaleDetail ; use Greenter\\Model\\Sale\\Legend ; require __DIR__ . '/vendor/autoload.php' ; $see = require __DIR__ . '/config.php' ; // Cliente $client = new Client (); $client -> setTipoDoc ( '1' ) -> setNumDoc ( '46712369' ) -> setRznSocial ( 'MARIA RAMOS ARTEAGA' ); // Emisor $address = new Address (); $address -> setUbigueo ( '150101' ) -> setDepartamento ( 'LIMA' ) -> setProvincia ( 'LIMA' ) -> setDistrito ( 'LIMA' ) -> setUrbanizacion ( '-' ) -> setDireccion ( 'AV LOS GERUNDIOS' ); $company = new Company (); $company -> setRuc ( '20000000001' ) -> setRazonSocial ( 'EMPRESA SAC' ) -> setNombreComercial ( 'EMPRESA' ) -> setAddress ( $address ); // Venta $invoice = ( new Invoice ()) -> setUblVersion ( '2.1' ) -> setTipoOperacion ( '0101' ) // Catalog. 51 -> setTipoDoc ( '01' ) -> setSerie ( 'B001' ) -> setCorrelativo ( '1' ) -> setFechaEmision ( new DateTime ()) -> setTipoMoneda ( 'PEN' ) -> setClient ( $client ) -> setMtoOperGravadas ( 100.00 ) -> setMtoIGV ( 18.00 ) -> setTotalImpuestos ( 18.00 ) -> setValorVenta ( 100.00 ) -> setSubTotal ( 118.00 ) -> setMtoImpVenta ( 118.00 ) -> setCompany ( $company ); $item = ( new SaleDetail ()) -> setCodProducto ( 'P001' ) -> setUnidad ( 'NIU' ) -> setCantidad ( 2 ) -> setDescripcion ( 'PRODUCTO 1' ) -> setMtoBaseIgv ( 100 ) -> setPorcentajeIgv ( 18.00 ) // 18% -> setIgv ( 18.00 ) -> setTipAfeIgv ( '10' ) -> setTotalImpuestos ( 18.00 ) -> setMtoValorVenta ( 100.00 ) -> setMtoValorUnitario ( 50.00 ) -> setMtoPrecioUnitario ( 59.00 ); $legend = ( new Legend ()) -> setCode ( '1000' ) -> setValue ( 'SON DOSCIENTOS TREINTA Y SEIS CON 00/100 SOLES' ); $invoice -> setDetails ([ $item ]) -> setLegends ([ $legend ]); $xml = $see -> getXmlSigned ( $invoice ); // Guardar XML file_put_contents ( $invoice -> getName () . '.xml' , $xml );","title":"Ejemplo"},{"location":"examples/contingencia/","text":"Contingencia \u00b6 Existen situaciones adversas por la que un emisor electr\u00f3nico no puede emitir comprobantes electronicos, en ese caso SUNAT les da la posibilidad de emitir un comprobante fisico, como anteriormente se realizaba. Para informar a SUNAT de estos comprobantes, a partir del 01-09-2018 se envi\u00e1 de la misma forma como se hace con los comprobantes electr\u00f3nicos. Las boletas por contingencia se siguen enviando empleando el resumen diario de boletas. Representaci\u00f3n Impresa \u00b6 La representaci\u00f3n impresa de los comprobantes de contingencia deben incluir algunas leyendas, el primero: \"Emisor electr\u00f3nico obligado\" y otra dependiendo del tipo de comprobante Tipo documento Leyenda Factura y Boleta \"Comprobante de Pago emitido en contingencia\" Nota de Cr\u00e9dito \"Nota de Cr\u00e9dito emitida en contingencia\" Nota de D\u00e9bito \"Nota de D\u00e9dito emitida en contingencia\" C. de Retenci\u00f3n \"Comprobante de Retenci\u00f3n emitido en contingencia\" C. de Percepci\u00f3n \"Comprobante de Percepci\u00f3n emitido en contingencia\" Factura Electr\u00f3nica \u00b6 El cambio con respecto a la emision normal de un comprobante electr\u00f3nico es la serie, que es num\u00e9rica. <?php //... $invoice -> setSerie ( '0001' ); //... Referencia \u00b6 Procedimiento de contingencia - SUNAT","title":"Contingencia"},{"location":"examples/contingencia/#contingencia","text":"Existen situaciones adversas por la que un emisor electr\u00f3nico no puede emitir comprobantes electronicos, en ese caso SUNAT les da la posibilidad de emitir un comprobante fisico, como anteriormente se realizaba. Para informar a SUNAT de estos comprobantes, a partir del 01-09-2018 se envi\u00e1 de la misma forma como se hace con los comprobantes electr\u00f3nicos. Las boletas por contingencia se siguen enviando empleando el resumen diario de boletas.","title":"Contingencia"},{"location":"examples/contingencia/#representacion-impresa","text":"La representaci\u00f3n impresa de los comprobantes de contingencia deben incluir algunas leyendas, el primero: \"Emisor electr\u00f3nico obligado\" y otra dependiendo del tipo de comprobante Tipo documento Leyenda Factura y Boleta \"Comprobante de Pago emitido en contingencia\" Nota de Cr\u00e9dito \"Nota de Cr\u00e9dito emitida en contingencia\" Nota de D\u00e9bito \"Nota de D\u00e9dito emitida en contingencia\" C. de Retenci\u00f3n \"Comprobante de Retenci\u00f3n emitido en contingencia\" C. de Percepci\u00f3n \"Comprobante de Percepci\u00f3n emitido en contingencia\"","title":"Representaci\u00f3n Impresa"},{"location":"examples/contingencia/#factura-electronica","text":"El cambio con respecto a la emision normal de un comprobante electr\u00f3nico es la serie, que es num\u00e9rica. <?php //... $invoice -> setSerie ( '0001' ); //...","title":"Factura Electr\u00f3nica"},{"location":"examples/contingencia/#referencia","text":"Procedimiento de contingencia - SUNAT","title":"Referencia"},{"location":"examples/descuento-linea/","text":"Factura con Descuentos \u00b6 Las lineas resaltadas son propias de este modelo de factura. C\u00f3digo \u00b6 <?php use Greenter\\Model\\Sale\\Charge ; use Greenter\\Model\\Sale\\Invoice ; use Greenter\\Model\\Sale\\Legend ; use Greenter\\Model\\Sale\\SaleDetail ; $invoice = new Invoice (); $invoice -> setUblVersion ( '2.1' ) -> setTipoOperacion ( '0101' ) -> setTipoDoc ( '01' ) -> setSerie ( 'F001' ) -> setCorrelativo ( '123' ) -> setFechaEmision ( new \\DateTime ()) -> setTipoMoneda ( 'PEN' ) -> setClient ( $this -> getClient ()) -> setCompany ( $this -> getCompany ()) -> setMtoOperGravadas ( 180 ) -> setMtoIGV ( 32.40 ) -> setTotalImpuestos ( 32.40 ) -> setValorVenta ( 180 ) -> setMtoImpVenta ( 212.40 ); $detail = new SaleDetail (); $detail -> setCodProducto ( 'P001' ) -> setUnidad ( 'NIU' ) -> setDescripcion ( 'PROD 1' ) -> setCantidad ( 2 ) -> setMtoValorUnitario ( 100 ) -> setDescuentos ([ ( new Charge ()) -> setCodTipo ( '00' ) // Catalog. 53 -> setMontoBase ( 200 ) -> setFactor ( 0.10 ) -> setMonto ( 20 ) ]) -> setMtoValorVenta ( 180 ) -> setMtoBaseIgv ( 180 ) -> setPorcentajeIgv ( 18 ) -> setIgv ( 32.40 ) -> setTipAfeIgv ( '10' ) -> setTotalImpuestos ( 32.40 ) -> setMtoPrecioUnitario ( 106.3 ) ; $invoice -> setDetails ([ $detail ]) -> setLegends ([ ( new Legend ()) -> setCode ( '1000' ) -> setValue ( 'SON DOSCIENTOS TREINTA Y SEIS CON OO/100 SOLES' ) ]);","title":"F. Descuentos"},{"location":"examples/descuento-linea/#factura-con-descuentos","text":"Las lineas resaltadas son propias de este modelo de factura.","title":"Factura con Descuentos"},{"location":"examples/descuento-linea/#codigo","text":"<?php use Greenter\\Model\\Sale\\Charge ; use Greenter\\Model\\Sale\\Invoice ; use Greenter\\Model\\Sale\\Legend ; use Greenter\\Model\\Sale\\SaleDetail ; $invoice = new Invoice (); $invoice -> setUblVersion ( '2.1' ) -> setTipoOperacion ( '0101' ) -> setTipoDoc ( '01' ) -> setSerie ( 'F001' ) -> setCorrelativo ( '123' ) -> setFechaEmision ( new \\DateTime ()) -> setTipoMoneda ( 'PEN' ) -> setClient ( $this -> getClient ()) -> setCompany ( $this -> getCompany ()) -> setMtoOperGravadas ( 180 ) -> setMtoIGV ( 32.40 ) -> setTotalImpuestos ( 32.40 ) -> setValorVenta ( 180 ) -> setMtoImpVenta ( 212.40 ); $detail = new SaleDetail (); $detail -> setCodProducto ( 'P001' ) -> setUnidad ( 'NIU' ) -> setDescripcion ( 'PROD 1' ) -> setCantidad ( 2 ) -> setMtoValorUnitario ( 100 ) -> setDescuentos ([ ( new Charge ()) -> setCodTipo ( '00' ) // Catalog. 53 -> setMontoBase ( 200 ) -> setFactor ( 0.10 ) -> setMonto ( 20 ) ]) -> setMtoValorVenta ( 180 ) -> setMtoBaseIgv ( 180 ) -> setPorcentajeIgv ( 18 ) -> setIgv ( 32.40 ) -> setTipAfeIgv ( '10' ) -> setTotalImpuestos ( 32.40 ) -> setMtoPrecioUnitario ( 106.3 ) ; $invoice -> setDetails ([ $detail ]) -> setLegends ([ ( new Legend ()) -> setCode ( '1000' ) -> setValue ( 'SON DOSCIENTOS TREINTA Y SEIS CON OO/100 SOLES' ) ]);","title":"C\u00f3digo"},{"location":"examples/detraccion/","text":"Factura con Detracciones \u00b6 Las lineas resaltadas son propias de este modelo de factura. C\u00f3digo \u00b6 <?php use Greenter\\Model\\Sale\\Detraction ; use Greenter\\Model\\Sale\\Invoice ; use Greenter\\Model\\Sale\\Legend ; use Greenter\\Model\\Sale\\SaleDetail ; $invoice = new Invoice (); $invoice -> setUblVersion ( '2.1' ) -> setTipoOperacion ( '1001' ) // detracci\u00f3n -> setTipoDoc ( '01' ) -> setSerie ( 'F001' ) -> setCorrelativo ( '123' ) -> setFechaEmision ( new \\DateTime ()) -> setTipoMoneda ( 'PEN' ) -> setClient ( $this -> getClient ()) -> setCompany ( $this -> getCompany ()) -> setMtoOperGravadas ( 200 ) -> setMtoIGV ( 36 ) -> setValorVenta ( 200 ) -> setTotalImpuestos ( 36 ) -> setMtoImpVenta ( 236 ) -> setDetraccion ( // MONEDA SIEMPRE EN SOLES ( new Detraction ()) // Carnes y despojos comestibles -> setCodBienDetraccion ( '014' ) // catalog. 54 // Deposito en cuenta -> setCodMedioPago ( '001' ) // catalog. 59 -> setCtaBanco ( '0004-3342343243' ) -> setPercent ( 4.00 ) -> setMount ( 9.44 ) ); $detail = new SaleDetail (); $detail -> setCodProducto ( 'P001' ) -> setUnidad ( 'NIU' ) -> setDescripcion ( 'PROD 1' ) -> setCantidad ( 2 ) -> setMtoValorUnitario ( 100 ) -> setMtoValorVenta ( 200 ) -> setMtoBaseIgv ( 200 ) -> setPorcentajeIgv ( 18 ) -> setIgv ( 36 ) -> setTipAfeIgv ( '10' ) -> setTotalImpuestos ( 36 ) -> setMtoPrecioUnitario ( 118 ) ; $invoice -> setDetails ([ $detail ]) -> setLegends ([ ( new Legend ()) -> setCode ( '1000' ) -> setValue ( 'SON DOSCIENTOS TREINTA Y SEIS CON OO/100 SOLES' ), ( new Legend ()) -> setCode ( '2006' ) -> setValue ( 'Operaci\u00f3n sujeta a detracci\u00f3n' ) ]);","title":"F. Detracci\u00f3n"},{"location":"examples/detraccion/#factura-con-detracciones","text":"Las lineas resaltadas son propias de este modelo de factura.","title":"Factura con Detracciones"},{"location":"examples/detraccion/#codigo","text":"<?php use Greenter\\Model\\Sale\\Detraction ; use Greenter\\Model\\Sale\\Invoice ; use Greenter\\Model\\Sale\\Legend ; use Greenter\\Model\\Sale\\SaleDetail ; $invoice = new Invoice (); $invoice -> setUblVersion ( '2.1' ) -> setTipoOperacion ( '1001' ) // detracci\u00f3n -> setTipoDoc ( '01' ) -> setSerie ( 'F001' ) -> setCorrelativo ( '123' ) -> setFechaEmision ( new \\DateTime ()) -> setTipoMoneda ( 'PEN' ) -> setClient ( $this -> getClient ()) -> setCompany ( $this -> getCompany ()) -> setMtoOperGravadas ( 200 ) -> setMtoIGV ( 36 ) -> setValorVenta ( 200 ) -> setTotalImpuestos ( 36 ) -> setMtoImpVenta ( 236 ) -> setDetraccion ( // MONEDA SIEMPRE EN SOLES ( new Detraction ()) // Carnes y despojos comestibles -> setCodBienDetraccion ( '014' ) // catalog. 54 // Deposito en cuenta -> setCodMedioPago ( '001' ) // catalog. 59 -> setCtaBanco ( '0004-3342343243' ) -> setPercent ( 4.00 ) -> setMount ( 9.44 ) ); $detail = new SaleDetail (); $detail -> setCodProducto ( 'P001' ) -> setUnidad ( 'NIU' ) -> setDescripcion ( 'PROD 1' ) -> setCantidad ( 2 ) -> setMtoValorUnitario ( 100 ) -> setMtoValorVenta ( 200 ) -> setMtoBaseIgv ( 200 ) -> setPorcentajeIgv ( 18 ) -> setIgv ( 36 ) -> setTipAfeIgv ( '10' ) -> setTotalImpuestos ( 36 ) -> setMtoPrecioUnitario ( 118 ) ; $invoice -> setDetails ([ $detail ]) -> setLegends ([ ( new Legend ()) -> setCode ( '1000' ) -> setValue ( 'SON DOSCIENTOS TREINTA Y SEIS CON OO/100 SOLES' ), ( new Legend ()) -> setCode ( '2006' ) -> setValue ( 'Operaci\u00f3n sujeta a detracci\u00f3n' ) ]);","title":"C\u00f3digo"},{"location":"examples/exonerada/","text":"Factura Exonerada \u00b6 Las lineas resaltadas son propias de este modelo de factura. C\u00f3digo \u00b6 <?php use Greenter\\Model\\Sale\\Invoice ; use Greenter\\Model\\Sale\\Legend ; use Greenter\\Model\\Sale\\SaleDetail ; $invoice = new Invoice (); $invoice -> setFecVencimiento ( new \\DateTime ()) -> setUblVersion ( '2.1' ) -> setTipoOperacion ( '0101' ) -> setTipoDoc ( '01' ) -> setSerie ( 'F001' ) -> setCorrelativo ( '123' ) -> setFechaEmision ( new \\DateTime ()) -> setTipoMoneda ( 'PEN' ) -> setClient ( $this -> getClient ()) -> setCompany ( $this -> getCompany ()) -> setMtoOperExoneradas ( 200 ) -> setMtoIGV ( 0 ) -> setTotalImpuestos ( 0 ) -> setValorVenta ( 200 ) -> setMtoImpVenta ( 200 ); $detail = new SaleDetail (); $detail -> setCodProducto ( 'P001' ) -> setUnidad ( 'NIU' ) -> setDescripcion ( 'PROD 1' ) -> setCantidad ( 2 ) -> setMtoValorUnitario ( 100 ) -> setMtoValorVenta ( 200 ) -> setMtoBaseIgv ( 200 ) -> setPorcentajeIgv ( 18 ) -> setIgv ( 0 ) -> setTipAfeIgv ( '20' ) -> setTotalImpuestos ( 0 ) -> setMtoPrecioUnitario ( 100 ) ; $invoice -> setDetails ([ $detail ]) -> setLegends ([ ( new Legend ()) -> setCode ( '1000' ) -> setValue ( 'SON DOSCIENTOS CON OO/100 SOLES' ) ]);","title":"F. Exonerada"},{"location":"examples/exonerada/#factura-exonerada","text":"Las lineas resaltadas son propias de este modelo de factura.","title":"Factura Exonerada"},{"location":"examples/exonerada/#codigo","text":"<?php use Greenter\\Model\\Sale\\Invoice ; use Greenter\\Model\\Sale\\Legend ; use Greenter\\Model\\Sale\\SaleDetail ; $invoice = new Invoice (); $invoice -> setFecVencimiento ( new \\DateTime ()) -> setUblVersion ( '2.1' ) -> setTipoOperacion ( '0101' ) -> setTipoDoc ( '01' ) -> setSerie ( 'F001' ) -> setCorrelativo ( '123' ) -> setFechaEmision ( new \\DateTime ()) -> setTipoMoneda ( 'PEN' ) -> setClient ( $this -> getClient ()) -> setCompany ( $this -> getCompany ()) -> setMtoOperExoneradas ( 200 ) -> setMtoIGV ( 0 ) -> setTotalImpuestos ( 0 ) -> setValorVenta ( 200 ) -> setMtoImpVenta ( 200 ); $detail = new SaleDetail (); $detail -> setCodProducto ( 'P001' ) -> setUnidad ( 'NIU' ) -> setDescripcion ( 'PROD 1' ) -> setCantidad ( 2 ) -> setMtoValorUnitario ( 100 ) -> setMtoValorVenta ( 200 ) -> setMtoBaseIgv ( 200 ) -> setPorcentajeIgv ( 18 ) -> setIgv ( 0 ) -> setTipAfeIgv ( '20' ) -> setTotalImpuestos ( 0 ) -> setMtoPrecioUnitario ( 100 ) ; $invoice -> setDetails ([ $detail ]) -> setLegends ([ ( new Legend ()) -> setCode ( '1000' ) -> setValue ( 'SON DOSCIENTOS CON OO/100 SOLES' ) ]);","title":"C\u00f3digo"},{"location":"examples/exportacion/","text":"Factura Exportaci\u00f3n \u00b6 Las lineas resaltadas son propias de este modelo de factura. C\u00f3digo \u00b6 <?php use Greenter\\Model\\Client\\Client ; use Greenter\\Model\\Sale\\Invoice ; use Greenter\\Model\\Sale\\Legend ; use Greenter\\Model\\Sale\\SaleDetail ; $invoice = new Invoice (); $invoice -> setUblVersion ( '2.1' ) -> setTipoOperacion ( '0200' ) // Tipo Operacion: exportaction -> setTipoDoc ( '01' ) -> setSerie ( 'F001' ) -> setCorrelativo ( '123' ) -> setFechaEmision ( new \\DateTime ()) -> setTipoMoneda ( 'USD' ) -> setCompany ( $this -> getCompany ()) -> setClient (( new Client ()) // Cliente: extranjeria o sin documentos -> setTipoDoc ( '0' ) -> setNumDoc ( '-' ) -> setRznSocial ( 'EXTRANJERO' ) ) -> setMtoOperExportacion ( 100 ) -> setMtoIGV ( 0 ) -> setTotalImpuestos ( 0 ) -> setValorVenta ( 100 ) -> setMtoImpVenta ( 100 ); $detail = new SaleDetail (); $detail -> setCodProducto ( 'P001' ) -> setCodProdSunat ( '43231513' ) // Codigo Producto Sunat, requerido. -> setUnidad ( 'KG' ) -> setDescripcion ( 'PROD 1' ) -> setCantidad ( 2 ) -> setMtoValorUnitario ( 50 ) -> setMtoValorVenta ( 100 ) -> setMtoBaseIgv ( 100 ) -> setPorcentajeIgv ( 0 ) -> setIgv ( 0 ) -> setTipAfeIgv ( '40' ) -> setTotalImpuestos ( 0 ) -> setMtoPrecioUnitario ( 50 ) ; $invoice -> setDetails ([ $detail ]) -> setLegends ([ ( new Legend ()) -> setCode ( '1000' ) -> setValue ( 'SON CIEN CON OO/100 SOLES' ) ]);","title":"F. Exportaci\u00f3n"},{"location":"examples/exportacion/#factura-exportacion","text":"Las lineas resaltadas son propias de este modelo de factura.","title":"Factura Exportaci\u00f3n"},{"location":"examples/exportacion/#codigo","text":"<?php use Greenter\\Model\\Client\\Client ; use Greenter\\Model\\Sale\\Invoice ; use Greenter\\Model\\Sale\\Legend ; use Greenter\\Model\\Sale\\SaleDetail ; $invoice = new Invoice (); $invoice -> setUblVersion ( '2.1' ) -> setTipoOperacion ( '0200' ) // Tipo Operacion: exportaction -> setTipoDoc ( '01' ) -> setSerie ( 'F001' ) -> setCorrelativo ( '123' ) -> setFechaEmision ( new \\DateTime ()) -> setTipoMoneda ( 'USD' ) -> setCompany ( $this -> getCompany ()) -> setClient (( new Client ()) // Cliente: extranjeria o sin documentos -> setTipoDoc ( '0' ) -> setNumDoc ( '-' ) -> setRznSocial ( 'EXTRANJERO' ) ) -> setMtoOperExportacion ( 100 ) -> setMtoIGV ( 0 ) -> setTotalImpuestos ( 0 ) -> setValorVenta ( 100 ) -> setMtoImpVenta ( 100 ); $detail = new SaleDetail (); $detail -> setCodProducto ( 'P001' ) -> setCodProdSunat ( '43231513' ) // Codigo Producto Sunat, requerido. -> setUnidad ( 'KG' ) -> setDescripcion ( 'PROD 1' ) -> setCantidad ( 2 ) -> setMtoValorUnitario ( 50 ) -> setMtoValorVenta ( 100 ) -> setMtoBaseIgv ( 100 ) -> setPorcentajeIgv ( 0 ) -> setIgv ( 0 ) -> setTipAfeIgv ( '40' ) -> setTotalImpuestos ( 0 ) -> setMtoPrecioUnitario ( 50 ) ; $invoice -> setDetails ([ $detail ]) -> setLegends ([ ( new Legend ()) -> setCode ( '1000' ) -> setValue ( 'SON CIEN CON OO/100 SOLES' ) ]);","title":"C\u00f3digo"},{"location":"examples/gratuita/","text":"Factura Gratuita \u00b6 Las lineas resaltadas son propias de este modelo de factura. C\u00f3digo \u00b6 <?php use Greenter\\Model\\Sale\\Invoice ; use Greenter\\Model\\Sale\\Legend ; use Greenter\\Model\\Sale\\SaleDetail ; $invoice = new Invoice (); $invoice -> setUblVersion ( '2.1' ) -> setTipoOperacion ( '0101' ) -> setTipoDoc ( '01' ) -> setSerie ( 'F001' ) -> setCorrelativo ( '123' ) -> setFechaEmision ( new \\DateTime ()) -> setTipoMoneda ( 'PEN' ) -> setClient ( $this -> getClient ()) -> setCompany ( $this -> getCompany ()) -> setMtoOperGratuitas ( 200 ) -> setMtoIGV ( 0 ) -> setTotalImpuestos ( 0 ) -> setValorVenta ( 0 ) -> setMtoImpVenta ( 0 ); $detail = new SaleDetail (); $detail -> setCodProducto ( 'P001' ) -> setUnidad ( 'NIU' ) -> setDescripcion ( 'PROD 1' ) -> setCantidad ( 2 ) -> setMtoValorUnitario ( 0 ) -> setMtoValorGratuito ( 100 ) -> setMtoValorVenta ( 200 ) -> setMtoBaseIgv ( 200 ) -> setPorcentajeIgv ( 18 ) -> setIgv ( 36 ) -> setTipAfeIgv ( '11' ) -> setTotalImpuestos ( 36 ) -> setMtoPrecioUnitario ( 0 ) ; $invoice -> setDetails ([ $detail ]) -> setLegends ([ ( new Legend ()) -> setCode ( '1002' ) -> setValue ( 'TRANSFERENCIA GRATUITA DE UN BIEN Y/O SERVICIO PRESTADO GRATUITAMENTE' ) ]);","title":"F. Gratuita"},{"location":"examples/gratuita/#factura-gratuita","text":"Las lineas resaltadas son propias de este modelo de factura.","title":"Factura Gratuita"},{"location":"examples/gratuita/#codigo","text":"<?php use Greenter\\Model\\Sale\\Invoice ; use Greenter\\Model\\Sale\\Legend ; use Greenter\\Model\\Sale\\SaleDetail ; $invoice = new Invoice (); $invoice -> setUblVersion ( '2.1' ) -> setTipoOperacion ( '0101' ) -> setTipoDoc ( '01' ) -> setSerie ( 'F001' ) -> setCorrelativo ( '123' ) -> setFechaEmision ( new \\DateTime ()) -> setTipoMoneda ( 'PEN' ) -> setClient ( $this -> getClient ()) -> setCompany ( $this -> getCompany ()) -> setMtoOperGratuitas ( 200 ) -> setMtoIGV ( 0 ) -> setTotalImpuestos ( 0 ) -> setValorVenta ( 0 ) -> setMtoImpVenta ( 0 ); $detail = new SaleDetail (); $detail -> setCodProducto ( 'P001' ) -> setUnidad ( 'NIU' ) -> setDescripcion ( 'PROD 1' ) -> setCantidad ( 2 ) -> setMtoValorUnitario ( 0 ) -> setMtoValorGratuito ( 100 ) -> setMtoValorVenta ( 200 ) -> setMtoBaseIgv ( 200 ) -> setPorcentajeIgv ( 18 ) -> setIgv ( 36 ) -> setTipAfeIgv ( '11' ) -> setTotalImpuestos ( 36 ) -> setMtoPrecioUnitario ( 0 ) ; $invoice -> setDetails ([ $detail ]) -> setLegends ([ ( new Legend ()) -> setCode ( '1002' ) -> setValue ( 'TRANSFERENCIA GRATUITA DE UN BIEN Y/O SERVICIO PRESTADO GRATUITAMENTE' ) ]);","title":"C\u00f3digo"},{"location":"examples/icbper/","text":"Factura con ICBPER \u00b6 Las lineas resaltadas son propias de este modelo de factura. C\u00f3digo \u00b6 <?php use Greenter\\Model\\Sale\\Invoice ; use Greenter\\Model\\Sale\\Legend ; use Greenter\\Model\\Sale\\SaleDetail ; $invoice = new Invoice (); $invoice -> setFecVencimiento ( new \\DateTime ()) -> setUblVersion ( '2.1' ) -> setTipoOperacion ( '0101' ) -> setTipoDoc ( '01' ) -> setSerie ( 'F001' ) -> setCorrelativo ( '123' ) -> setFechaEmision ( new \\DateTime ()) -> setTipoMoneda ( 'PEN' ) -> setClient ( $this -> getClient ()) -> setCompany ( $this -> getCompany ()) -> setMtoOperGravadas ( 200.20 ) -> setMtoIGV ( 36.04 ) -> setIcbper ( 0.40 ) -> setTotalImpuestos ( 36.44 ) -> setValorVenta ( 200.20 ) -> setSubTotal ( 236.64 ) -> setRedondeo ( 0.36 ) -> setMtoImpVenta ( 237 ); $detail = new SaleDetail (); $detail -> setCodProducto ( 'P001' ) -> setUnidad ( 'NIU' ) -> setCantidad ( 2 ) -> setDescripcion ( 'PRODUCTO 1' ) -> setMtoBaseIgv ( 200.00 ) -> setPorcentajeIgv ( 18.0 ) -> setIgv ( 36 ) -> setTotalImpuestos ( 36 ) -> setTipAfeIgv ( '10' ) -> setMtoValorVenta ( 200 ) -> setMtoValorUnitario ( 100 ) -> setMtoPrecioUnitario ( 118 ); $bolsa = new SaleDetail (); $bolsa -> setCodProducto ( 'P002' ) -> setUnidad ( 'NIU' ) -> setCantidad ( 4 ) -> setDescripcion ( 'BOLSA DE PLASTICO' ) -> setMtoValorUnitario ( 0.05 ) -> setMtoPrecioUnitario ( 0.059 ) -> setMtoValorVenta ( 0.20 ) -> setTipAfeIgv ( '10' ) -> setMtoBaseIgv ( 0.20 ) -> setPorcentajeIgv ( 18.0 ) -> setIgv ( 0.04 ) -> setIcbper ( 0.40 ) // (cantidad)*(factor ICBPER) -> setFactorIcbper ( 0.10 ) -> setTotalImpuestos ( 0.44 ) ; $invoice -> setDetails ([ $detail , $bolsa ]) -> setLegends ([ ( new Legend ()) -> setCode ( '1000' ) -> setValue ( 'SON DOSCIENTOS TREINTA Y SIETE CON 00/100 SOLES' ) ]); Monto ICBPER \u00b6 La cuant\u00eda del impuesto al consumo de las bolsas de pl\u00e1stico es gradual y se aplica por la adquisici\u00f3n unitaria de bolsas de pl\u00e1stico, de acuerdo con el siguiente cronograma: Monto A\u00f1o S/ 0.10 2019 S/ 0.20 2020 S/ 0.30 2021 S/ 0.40 2022 S/ 0.50 2023+","title":"F. ICBPER"},{"location":"examples/icbper/#factura-con-icbper","text":"Las lineas resaltadas son propias de este modelo de factura.","title":"Factura con ICBPER"},{"location":"examples/icbper/#codigo","text":"<?php use Greenter\\Model\\Sale\\Invoice ; use Greenter\\Model\\Sale\\Legend ; use Greenter\\Model\\Sale\\SaleDetail ; $invoice = new Invoice (); $invoice -> setFecVencimiento ( new \\DateTime ()) -> setUblVersion ( '2.1' ) -> setTipoOperacion ( '0101' ) -> setTipoDoc ( '01' ) -> setSerie ( 'F001' ) -> setCorrelativo ( '123' ) -> setFechaEmision ( new \\DateTime ()) -> setTipoMoneda ( 'PEN' ) -> setClient ( $this -> getClient ()) -> setCompany ( $this -> getCompany ()) -> setMtoOperGravadas ( 200.20 ) -> setMtoIGV ( 36.04 ) -> setIcbper ( 0.40 ) -> setTotalImpuestos ( 36.44 ) -> setValorVenta ( 200.20 ) -> setSubTotal ( 236.64 ) -> setRedondeo ( 0.36 ) -> setMtoImpVenta ( 237 ); $detail = new SaleDetail (); $detail -> setCodProducto ( 'P001' ) -> setUnidad ( 'NIU' ) -> setCantidad ( 2 ) -> setDescripcion ( 'PRODUCTO 1' ) -> setMtoBaseIgv ( 200.00 ) -> setPorcentajeIgv ( 18.0 ) -> setIgv ( 36 ) -> setTotalImpuestos ( 36 ) -> setTipAfeIgv ( '10' ) -> setMtoValorVenta ( 200 ) -> setMtoValorUnitario ( 100 ) -> setMtoPrecioUnitario ( 118 ); $bolsa = new SaleDetail (); $bolsa -> setCodProducto ( 'P002' ) -> setUnidad ( 'NIU' ) -> setCantidad ( 4 ) -> setDescripcion ( 'BOLSA DE PLASTICO' ) -> setMtoValorUnitario ( 0.05 ) -> setMtoPrecioUnitario ( 0.059 ) -> setMtoValorVenta ( 0.20 ) -> setTipAfeIgv ( '10' ) -> setMtoBaseIgv ( 0.20 ) -> setPorcentajeIgv ( 18.0 ) -> setIgv ( 0.04 ) -> setIcbper ( 0.40 ) // (cantidad)*(factor ICBPER) -> setFactorIcbper ( 0.10 ) -> setTotalImpuestos ( 0.44 ) ; $invoice -> setDetails ([ $detail , $bolsa ]) -> setLegends ([ ( new Legend ()) -> setCode ( '1000' ) -> setValue ( 'SON DOSCIENTOS TREINTA Y SIETE CON 00/100 SOLES' ) ]);","title":"C\u00f3digo"},{"location":"examples/icbper/#monto-icbper","text":"La cuant\u00eda del impuesto al consumo de las bolsas de pl\u00e1stico es gradual y se aplica por la adquisici\u00f3n unitaria de bolsas de pl\u00e1stico, de acuerdo con el siguiente cronograma: Monto A\u00f1o S/ 0.10 2019 S/ 0.20 2020 S/ 0.30 2021 S/ 0.40 2022 S/ 0.50 2023+","title":"Monto ICBPER"},{"location":"examples/percepcion/","text":"Factura con Percepci\u00f3n \u00b6 Las lineas resaltadas son propias de este modelo de factura. C\u00f3digo \u00b6 <?php use Greenter\\Model\\Sale\\Invoice ; use Greenter\\Model\\Sale\\Legend ; use Greenter\\Model\\Sale\\SaleDetail ; use Greenter\\Model\\Sale\\SalePerception ; $invoice = new Invoice (); $invoice -> setUblVersion ( '2.1' ) -> setTipoOperacion ( '2001' ) // Percepciones -> setTipoDoc ( '01' ) -> setSerie ( 'F001' ) -> setCorrelativo ( '123' ) -> setFechaEmision ( new \\DateTime ()) -> setTipoMoneda ( 'PEN' ) -> setClient ( $this -> getClient ()) -> setCompany ( $this -> getCompany ()) -> setMtoOperGravadas ( 200 ) -> setMtoIGV ( 36 ) -> setTotalImpuestos ( 36 ) -> setValorVenta ( 200 ) -> setMtoImpVenta ( 236 ) -> setPerception (( new SalePerception ()) -> setCodReg ( '51' ) -> setPorcentaje ( 0.02 ) -> setMtoBase ( 200 ) -> setMto ( 4.00 ) -> setMtoTotal ( 204.00 )) -> setSumOtrosCargos ( 4.00 ); $detail = new SaleDetail (); $detail -> setCodProducto ( 'P001' ) -> setUnidad ( 'NIU' ) -> setDescripcion ( 'PROD 1' ) -> setCantidad ( 2 ) -> setMtoValorUnitario ( 100 ) -> setMtoValorVenta ( 200 ) -> setMtoBaseIgv ( 200 ) -> setPorcentajeIgv ( 18 ) -> setIgv ( 36 ) -> setTipAfeIgv ( '10' ) -> setTotalImpuestos ( 36 ) -> setMtoPrecioUnitario ( 118 ) ; $invoice -> setDetails ([ $detail ]) -> setLegends ([ ( new Legend ()) -> setCode ( '1000' ) -> setValue ( 'SON DOSCIENTOS TREINTA Y SEIS CON OO/100 SOLES' ), ( new Legend ()) -> setCode ( '2000' ) -> setValue ( 'COMPROBANTE DE PERCEPCI\u00d3N' ) ]);","title":"F. Percepci\u00f3n"},{"location":"examples/percepcion/#factura-con-percepcion","text":"Las lineas resaltadas son propias de este modelo de factura.","title":"Factura con Percepci\u00f3n"},{"location":"examples/percepcion/#codigo","text":"<?php use Greenter\\Model\\Sale\\Invoice ; use Greenter\\Model\\Sale\\Legend ; use Greenter\\Model\\Sale\\SaleDetail ; use Greenter\\Model\\Sale\\SalePerception ; $invoice = new Invoice (); $invoice -> setUblVersion ( '2.1' ) -> setTipoOperacion ( '2001' ) // Percepciones -> setTipoDoc ( '01' ) -> setSerie ( 'F001' ) -> setCorrelativo ( '123' ) -> setFechaEmision ( new \\DateTime ()) -> setTipoMoneda ( 'PEN' ) -> setClient ( $this -> getClient ()) -> setCompany ( $this -> getCompany ()) -> setMtoOperGravadas ( 200 ) -> setMtoIGV ( 36 ) -> setTotalImpuestos ( 36 ) -> setValorVenta ( 200 ) -> setMtoImpVenta ( 236 ) -> setPerception (( new SalePerception ()) -> setCodReg ( '51' ) -> setPorcentaje ( 0.02 ) -> setMtoBase ( 200 ) -> setMto ( 4.00 ) -> setMtoTotal ( 204.00 )) -> setSumOtrosCargos ( 4.00 ); $detail = new SaleDetail (); $detail -> setCodProducto ( 'P001' ) -> setUnidad ( 'NIU' ) -> setDescripcion ( 'PROD 1' ) -> setCantidad ( 2 ) -> setMtoValorUnitario ( 100 ) -> setMtoValorVenta ( 200 ) -> setMtoBaseIgv ( 200 ) -> setPorcentajeIgv ( 18 ) -> setIgv ( 36 ) -> setTipAfeIgv ( '10' ) -> setTotalImpuestos ( 36 ) -> setMtoPrecioUnitario ( 118 ) ; $invoice -> setDetails ([ $detail ]) -> setLegends ([ ( new Legend ()) -> setCode ( '1000' ) -> setValue ( 'SON DOSCIENTOS TREINTA Y SEIS CON OO/100 SOLES' ), ( new Legend ()) -> setCode ( '2000' ) -> setValue ( 'COMPROBANTE DE PERCEPCI\u00d3N' ) ]);","title":"C\u00f3digo"}]}